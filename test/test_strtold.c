/*
 * test_strtold.c: accuracy tests for strtold(...) for x86 f80 long double
 * by pts@fazekas.hu at Wed May 22 00:23:55 CEST 2024
 */

#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef char assert_long_double_size[sizeof(long double) == 10 || sizeof(long double) == 12 || sizeof(long double) == 16 ? 1 : -1];

static unsigned goodc, badc;

static char expect(const char *name, const char *s, unsigned exp, unsigned high, unsigned low) {
  union { unsigned u[3]; long double ld; } x;
  char is_ok, is_long = 0;
  const char *s2 = s;
  size_t s2len;
  for (; isspace(*s2); ++s2) {}
  x.u[2] = 0;
  x.ld = strtold(s, NULL);
  x.u[2] &= 0xffff;
  is_ok = x.u[0] == low && x.u[1] == high && x.u[2] == exp;
  if (!name || !name[0]) name = s2;
#if defined(__GNUC__) && !defined(__PCC__)
#  pragma GCC diagnostic push
#  pragma GCC diagnostic ignored "-Wformat"
#endif
#ifdef __MINILIBC686__
#  define FMT_LG "0x%08x:0x%08x:0x%08x"
#else
#  define FMT_LG "%.20Lg"
#endif
  if ((s2len = strlen(s2)) > 40) {
    is_long = 1;
    s2 += s2len - 40;  /* Shorten it just for printing. */
  }
  if (is_ok) {
    printf("is_ok=%d name=%s input=%s%s output=" FMT_LG " expected=e/h/l=0x%04x/0x%08x/0x%08x", is_ok, name, is_long ? "..." : "", s2, x.ld, x.u[2], x.u[1], x.u[0]);
  } else {
    printf("is_ok=%d name=%s input=%s%s output=" FMT_LG " expected:e/h/l=0x%04x/0x%08x/0x%08x got:e/h/l=0x%04x/0x%08x/0x%08x", is_ok, name, is_long ? "..." : "", s2, x.ld, exp, high, low, x.u[2], x.u[1], x.u[0]);
  }
#if defined(__GNUC__) && !defined(__PCC__)
#  pragma GCC diagnostic pop
#endif
  putchar('\n');
  fflush(stdout);
  if (is_ok) {
    ++goodc;
  } else {
    ++badc;
  }
  return is_ok;
}

int main(int argc, char **argv) {
  (void)argc; (void)argv;

  expect("", "  \t", 0, 0, 0);
  expect("0", "  \t0", 0, 0, 0);
  expect("1", "\r\n1", 0x3fff, 0x80000000U, 0);
  expect("2", "\n\v2", 0x4000, 0x80000000U, 0);
  expect("", ".25", 0x3ffd, 0x80000000U, 0);
  expect("", "12.25", 0x4002, 0xc4000000U, 0);
  expect("", "+12.249999999999999999999999999999999999999999999999999999999999999999999999", 0x4002, 0xc4000000U, 0);  /* Same as 12.25. */
  expect("", "+12.2499999999999999999", 0x4002, 0xc4000000U, 0);
  expect("", "+12.249999999999999999", 0x4002, 0xc3ffffffU, 0xffffffffU);
  expect("", "42.", 0x4004, 0xa8000000U, 0);
  expect("", "  \t+004567", 0x400b, 0x8eb80000U, 0);
  expect("", "  -0.0000", 0x8000, 0, 0);
  expect("", " 000", 0, 0, 0);
  expect("", " -0", 0x8000, 0, 0);
  expect("", " -00.000", 0x8000, 0, 0);
  expect("", "1.e2", 0x4005U, 0xc8000000U, 0);
  expect("", "  -100", 0xc005U, 0xc8000000U, 0);
  expect("", "  -12.345e-67", 0xbf24, 0x8520d2ceU, 0x4dde0c28U);
  expect("", "  +12.345678901234567E67", 0x40e1, 0x92895a8dU, 0x5fda11f1U);
  expect("", "  -1.0345e-4932", 0x8000, 0x276286eeU, 0xfbf7ea34U);
  expect("", "  +1.0345678901234567E4932", 0x7ffe, 0xde9cdc14U, 0xff618eaU);
  expect("", "+0xf00.ba4p16000", 0x7e8a, 0xf00ba400U, 0);
  expect("", "\r -0xf00.ba4p-16000", 0x818a, 0xf00ba400U, 0);
  expect("huge_exp", "1e9999999999999999999999999999999999999999999999999999999999999999999999", 0x7fff, 0x80000000U, 0);  /* Same as infinity. */
  expect("huge_neg_exp", "1e-9999999999999999999999999999999999999999999999999999999999999999999999", 0, 0, 0);  /* Same as 0. */
  expect("a_small", "+1.8000320949558996187e-4837", 0x013b, 0xcd557719U, 0xcab669c7U);
  expect("a_neg_large", "-9.0245045105257814454e+4926", 0xffed, 0xfe857a4fU, 0xaa1d633bU);

  /* Near the subnormal boundary. */
  expect("", "3.3621031431120935052e-4932L", 0, 0x7fffffffU, 0xfffffffdU);
  expect("", "3.3621031431120935053e-4932L", 0, 0x7fffffffU, 0xfffffffdU);
  expect("", "3.3621031431120935054e-4932L", 0, 0x7fffffffU, 0xfffffffeU);
  expect("", "3.3621031431120935055e-4932L", 0, 0x7fffffffU, 0xfffffffeU);
  expect("", "3.3621031431120935056e-4932L", 0, 0x7fffffffU, 0xfffffffeU);
  expect("", "3.3621031431120935057e-4932L", 0, 0x7fffffffU, 0xfffffffeU);
  expect("", "3.3621031431120935058e-4932L", 0, 0x7fffffffU, 0xffffffffU);
  expect("", "3.3621031431120935059e-4932L", 0, 0x7fffffffU, 0xffffffffU);
  expect("", "3.3621031431120935060e-4932L", 0, 0x7fffffffU, 0xffffffffU);
  expect("", "3.3621031431120935061e-4932L", 1, 0x80000000U, 0);
  expect("", "3.3621031431120935062e-4932L", 1, 0x80000000U, 0);
  expect("", "3.3621031431120935063e-4932L", 1, 0x80000000U, 0);
  expect("", "3.3621031431120935064e-4932L", 1, 0x80000000U, 0);
  expect("", "3.3621031431120935065e-4932L", 1, 0x80000000U, 1);
  expect("", "3.3621031431120935066e-4932L", 1, 0x80000000U, 1);
  expect("", "3.3621031431120935067e-4932L", 1, 0x80000000U, 1);
  expect("", "3.3621031431120935068e-4932L", 1, 0x80000000U, 1);
  expect("", "3.3621031431120935069e-4932L", 1, 0x80000000U, 2);
  expect("", "3.3621031431120935070e-4932L", 1, 0x80000000U, 2);
  expect("", "3.3621031431120935071e-4932L", 1, 0x80000000U, 2);
  expect("", "3.3621031431120935072e-4932L", 1, 0x80000000U, 3);
  expect("", "3.3621031431120935073e-4932L", 1, 0x80000000U, 3);
  expect("", "3.3621031431120935074e-4932L", 1, 0x80000000U, 3);
  expect("", "3.3621031431120935075e-4932L", 1, 0x80000000U, 3);
  expect("", "3.3621031431120935076e-4932L", 1, 0x80000000U, 4);
  expect("", "3.3621031431120935077e-4932L", 1, 0x80000000U, 4);

  expect("FLT_EPSILON", "1.19209290e-07F", 0x3fe8, 0x80000008U, 0x17a7e462U);
  expect("FLT_MIN", "1.17549435e-38F", 0x3f80, 0xfffffffcU, 0xfedd426eU);
  expect("FLT_MAX", "3.40282347e+38F", 0x407e, 0xffffff04U, 0x8ff9eb4eU);
  expect("DBL_EPSILON", "2.2204460492503131e-16", 0x3fcbU, 0x80000000U, 0x50);
  expect("DBL_MIN",     "2.2250738585072014e-308",     0x3c01, 0x80000000U, 0x46);  /* Fewer digits is not enough. */
  expect("DBL_MIN_dbl", "2.22507385850720138309e-308", 0x3c01, 0x80000000U, 0);
  expect("DBL_MAX", "1.7976931348623157e+308", 0x43fe, 0xffffffffU, 0xfffff7acU);
  expect("LDBL_EPSILON", "1.0842021724855044340e-19L", 0x3fc0, 0x80000000U, 0);
  expect("LDBL_EPSILON_long", "1.08420217248550443400745280086994171e-19L", 0x3fc0, 0x80000000U, 0);
  expect("LDBL_MIN", "3.3621031431120935062e-4932L", 0x0001, 0x80000000U, 0);
  expect("LDBL_MIN_twice", "6.7242062862241870124e-4932L", 2, 0x80000000U, 0);
  expect("LDBL_MIN_long", "3.36210314311209350626267781732175260e-4932L", 0x0001, 0x80000000U, 0);
  expect("LDBL_small_zero", "1.8225e-4951", 0, 0, 0);
  expect("LDBL_small_subnormal1", "1.8226e-4951", 0, 0, 1);
  expect("LDBL_small_subnormal2", "-1.8226e-4951", 0x8000, 0, 1);
  expect("LDBL_small_subnormal3", "2e-4951", 0, 0, 1);
  expect("LDBL_small_subnormal4", "3e-4951", 0, 0, 1);
  expect("LDBL_small_subnormal5", "3.64519953188247460252840593361941982e-4951", 0, 0, 1);
  expect("LDBL_small_subnormal6", "4e-4951", 0, 0, 1);
  expect("LDBL_MAX", "1.1897314953572317650e+4932L", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_short", "1.189731495357231765e+4932L", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long19a", "1.189731495357231765e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long19t", "1.189731495357231764e+4932", 0x7ffe, 0xffffffffU, 0xffffffefU);
  expect("LDBL_MAX_long20a", "1.1897314953572317650e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long20t", "1.1897314953572317649e+4932", 0x7ffe, 0xffffffffU, 0xfffffffdU);
  expect("LDBL_MAX_long21a", "1.18973149535723176499e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long21s", "1.18973149535723176498e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long22a", "1.189731495357231764990e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long22s", "1.189731495357231764989e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long23a", "1.1897314953572317649891e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long23s", "1.1897314953572317649890e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long24a", "1.18973149535723176498902e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long24s", "1.18973149535723176498901e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long25a", "1.189731495357231764989017e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long25s", "1.189731495357231764989016e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long26a", "1.1897314953572317649890162e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long26s", "1.1897314953572317649890161e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long27a", "1.18973149535723176498901612e+4932", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_long27s", "1.18973149535723176498901611e+4932", 0x7ffe, 0xffffffffU, 0xfffffffeU);
  expect("LDBL_MAX_long3", "1.18973149535723176502126385303097021e+4932L", 0x7ffe, 0xffffffffU, 0xffffffffU);
  expect("LDBL_MAX_more1", "1.189731495357231765054e+4932L", 0x7fff, 0x80000000U, 0);  /* Same as infinity. */
  expect("LDBL_MAX_more2", "1.189731495357231766e+4932", 0x7fff, 0x80000000U, 0);  /* Same as infinity. */

  expect("inf", "iNf", 0x7fff, 0x80000000, 0);
  expect("-inf", " -inF", 0xffff, 0x80000000, 0);
  expect("+inf", " +InF", 0x7fff, 0x80000000, 0);
  expect("", "+inx", 0, 0, 0);  /* Parse error. */
  expect("infinity", " inFInity", 0x7fff, 0x80000000, 0);
  expect("-infinity", "-iNFINitY", 0xffff, 0x80000000, 0);
  expect("nan", "NaN", 0x7fff, 0xc0000000, 0);
#ifdef USE_TEST_NEGATIVE_NAN  /* FreeBSD, gdtoa by David M. Gay. */
  expect("-nan", "\t -naN", 0xffff, 0xc0000000, 0);  /* Negative. IGNORE_IN_PYTHON. */
#else  /* Linux glibc, musl. */
  expect("-nan", "\t -naN", 0x7fff, 0xc0000000, 0);  /* Positive, even if - is specified. */
#endif
  expect("+nan", "\t +NaN", 0x7fff, 0xc0000000, 0);

  expect("", "0x1p-1", 0x3ffeU, 0x80000000U, 0);
  expect("", "0x1p-1000000000000000000000000000000", 0x0000U, 0x00000000U, 0);
  expect("", "0x1p0", 0x3fffU, 0x80000000U, 0);
  expect("", "0x10P0", 0x4003U, 0x80000000U, 0);
  expect("", "0x1p-1023", 0x3c00U, 0x80000000U, 0);
  expect("", "0x1.000002p0", 0x3fffU, 0x80000100U, 0);
  expect("", "0x1.000003p0", 0x3fffU, 0x80000180U, 0);
  expect("", "0x1.000001p0", 0x3fffU, 0x80000080U, 0);
  expect("", "0x1.000001000000001p0", 0x3fffU, 0x80000080U, 0x00000008U);
  expect("", "0x100000000000008p0", 0x4037U, 0x80000000U, 0x00000400U);
  expect("", "0x100000000000008.p0", 0x4037U, 0x80000000U, 0x00000400U);
  expect("", "0x100000000000008.00p0", 0x4037U, 0x80000000U, 0x00000400U);
  expect("", "0x10000000000000800p0", 0x403fU, 0x80000000U, 0x00000400U);
  expect("", "0x10000000000000801p0", 0x403fU, 0x80000000U, 0x00000400U);
  expect("", "0x800000000000ab120p32", 0x4062U, 0x80000000U, 0x0000ab12U);
  expect("", "0x800000000000ab127p32", 0x4062U, 0x80000000U, 0x0000ab12U);
  expect("", "0x800000000000ab128p32", 0x4062U, 0x80000000U, 0x0000ab12U);  /* Rounds down to nearest even. */
  expect("", "0x800000000000ab129p32", 0x4062U, 0x80000000U, 0x0000ab13U);
  expect("", "0x800000000000ab130p-64", 0x4002U, 0x80000000U, 0x0000ab13U);
  expect("", "0x800000000000ab137p-64", 0x4002U, 0x80000000U, 0x0000ab13U);
  expect("", "0x800000000000ab138p-64", 0x4002U, 0x80000000U, 0x0000ab14U);  /* Rounds up to nearest even. */
  expect("", "0x800000000000ab139p-64", 0x4002U, 0x80000000U, 0x0000ab14U);
  expect("", "0x10000000000000800.0000000000001p0", 0x403fU, 0x80000000U, 0x00000400U);
  expect("", "0x10000000000001800p0", 0x403fU, 0x80000000U, 0x00000c00U);
  expect("", "0x1.fffffep126", 0x407dU, 0xffffff00U, 0);
  expect("", "0x1.ffffffp126", 0x407dU, 0xffffff80U, 0);
  expect("", "0x1.fffffep127", 0x407eU, 0xffffff00U, 0);
  expect("", "0x1.ffffffp127", 0x407eU, 0xffffff80U, 0);  /* Rounds up to INFINITY for float. */
  expect("", "0x1.fffffffffffffp1022", 0x43fdU, 0xffffffffU, 0xfffff800U);
  expect("", "0x1.fffffffffffff8p1022", 0x43fdU, 0xffffffffU, 0xfffffc00U);  /* Rounds up for double. */
  expect("", "0x1.fffffffffffffp1023", 0x43feU, 0xffffffffU, 0xfffff800U);
  expect("", "0x1.fffffffffffff8p1023", 0x43feU, 0xffffffffU, 0xfffffc00U);  /* Rounds up to INFINITY for double. */
  expect("", "0x1.fffffffffffffffep16382", 0x7ffdU, 0xffffffffU, 0xffffffffU);
  expect("", "0x1.ffffffffffffffffp16382", 0x7ffeU, 0x80000000U, 0);  /* Rounds up for long double. */
  expect("", "0x1.fffffffffffffffep16383", 0x7ffeU, 0xffffffffU, 0xffffffffU);
  expect("", "0x1.ffffffffffffffffp16383", 0x7fffU, 0x80000000U, 0);  /* Rounds up to INFINITY for long double. */
  expect("hex_large_subnormal1", "0x7fffffffffffffffp-16446", 0, 0x40000000U, 0);
  expect("hex_large_subnormal2", "0x7fffffffffffffffp-16445", 0, 0x7fffffffU, 0xffffffffU);
  expect("hex_large_subnormal3", "0x7fffffffffffffff.7p-16445", 0, 0x7fffffffU, 0xffffffffU);
  expect("hex_large_subnormal4", "0x7fffffffffffffff.8p-16445", 1, 0x80000000U, 0);  /* Rounds up to nearest even. */
  expect("hex_large_subnormal5", "0x7fffffffffffffff.fp-16445", 1, 0x80000000U, 0);
  expect("hex_large_subnormal6", "0x7fffffffffffffff.7p-16445", 0, 0x7fffffffU, 0xffffffffU);
  expect("hex_subnormal0", "0x1p-16445", 0, 0, 1);
  expect("hex_subnormal1", "0x2p-16445", 0, 0, 2);
  expect("hex_subnormal2", "0x4p-16445", 0, 0, 4);
  expect("hex_subnormal3", "0x7p-16449", 0, 0, 0);  /* Rounds down. */
  expect("hex_subnormal4", "0x8p-16449", 0, 0, 0);  /* Rounds down to nearest even. */
  expect("hex_subnormal5", "0x9p-16449", 0, 0, 1);  /* Rounds up. */
  expect("hex_subnormal6", "0xfp-16449", 0, 0, 1);  /* Rounds up. */
  expect("hex_subnormal7", "0xf.fffffffffffffff8p-16449", 0, 0, 1);  /* Rounds up. */
  expect("hex_subnormal8", "0x4.7p-16445", 0, 0, 4);
  expect("hex_subnormal9", "0x4.8p-16445", 0, 0, 4);  /* Rounds down to nearest even. */
  expect("hex_subnormala", "0x4.9p-16445", 0, 0, 5);
  expect("hex_subnormalb", "0x5.7p-16445", 0, 0, 5);
  expect("hex_subnormalc", "0x5.8p-16445", 0, 0, 6);  /* Rounds up to nearest even. */
  expect("hex_subnormald", "0x5.9p-16445", 0, 0, 6);

  expect("rounding0", "156100447632772348560", 0x4042, 0x87654321U, 0x0fedcba9U);
  expect("rounding1", "156100447632772348567", 0x4042, 0x87654321U, 0x0fedcba9U);
  expect("rounding2", "156100447632772348568", 0x4042, 0x87654321U, 0x0fedcbaaU);  /* Rounds up to nearest even (0x0fedcbaa). */
  expect("rounding3", "156100447632772348569", 0x4042, 0x87654321U, 0x0fedcbaaU);
  expect("rounding4", "156100447632772348576", 0x4042, 0x87654321U, 0x0fedcbaaU);
  expect("rounding5", "156100447632772348583", 0x4042, 0x87654321U, 0x0fedcbaaU);
  expect("rounding6", "156100447632772348584", 0x4042, 0x87654321U, 0x0fedcbaaU);  /* Rounds down to nearest even (0x0fedcbaa). */
  expect("rounding7", "156100447632772348585", 0x4042, 0x87654321U, 0x0fedcbabU);
  expect("rounding8", "156100447632772348592", 0x4042, 0x87654321U, 0x0fedcbabU);

  /* These numbers are very long, but it's not possible to test subnormal rounding with shorter inputs. */
  expect("rounding_subnormal0.25", "911299882970618650632101483404854954099762703923390835930245121757092922158349434202390177156456801299311836836800882775491746408155508042493377018897452251370955645294482919642306315951408389939155390641495852682235079948388381817147810199988543202753879634595761513692178855612323826464929567053565655516883088865211017019814938434922056584742975703338666052989323453000054190668073008069358409757711401382448879713824803063830292790871907284615732508878463187540078321144646836641714520837263280926298497175995827146959986580625367150614866594146717614105908677560599298664715089392016783619495691054934073204437823890134211440316961661977129365812730934009878180695353988341524099861100850529263372112005494440901109477171905812258529227323637633070888651063754117762127747538812423705094043768193630399481207316041168207344806208594630537211881115413335113285224633734725269999866521248948235216770556291974523156583071033408384307591427651668177754025424246727136381704023361696393955886321614167616227321765765646890482554798209893671519933100185483167698146646061975813150428625627913004683426389119417464100765417965247075255522252188101059573453030353939631794886820407058177721498614643678758463219398856506200197929995488836037979149750875957205550088916491989692772734422102307762690936220523614080121068179030699537459090415147398802270894221813558133238807437473160137690739859560319624048454845519386476365293136990335117454422791419023565330181431828151870734413285105404921525764882299855357984362391524834349015768804575560961368835419493115509531656725852041771629386346595538752239016488852598228738155981970211789883296133871666620120140851882857096332325130619421054262737816186863658938716553696235385578777759657671097856303109826047646030593555743071151634371263116162163842429774756690129571890249249302694618266745032356856859879258097741197841919555437407743854928359534790669719638999794382112720687011634647044361817576684558724625744225713250341137601306821773485014581447146364342163747989066465762520868021905766505225844729872480243797707355400502595509869443020850165379788743173859145576255477727144173012043383739723542744190771201959350703462306885235518328850278815583719203990521860325564139609728125151807551445503270918528255874403111303698792745962171997087050822360314227188891304020453787801409723278140603832271114233523786546117322725291527658718897541208901735407351872443594948184951168691060870978021172967942306361626571077641327297718119321563981345882136259090137713556729892811590283306476205075479147079271094428064841973711602823705646768958871746411377707470132144695674603139062318630558765273113585596550581780101956885083478653298047293578971034172004858991568415867607860110758034102943901257650359209265993172582604368796832550227991875124190404530653699113234281017599675972717228881762872616434186349441235273719869912359540644153586737163021327006174089564189146448642123329760513470710952045089696777693604518869700296629894354067974095792458927056409146163642160925654650608387234540930183193134586363628266252885168941377664242625103384301342516981220052304340851830918342112001226102103494435426741373561760199946612965455547118392814389204858321021871505919062366967370907845118464121559886753900829580653195913017174949634850101659327920682778835169460415060177607887785092602593896393234825771018460885175530137990762628739986435339792477919143869600819845028005086837073134537699580113198710606881625449213227965777044569159618080059467520715567940849048784878428075784048591505385207632864227646012093136506294441285115051778230787980794100536688217055491722478845399120313290174205565180798564880453263575864305591991982317190768223088819713678569560965777695766765031114759828882044210076232880703287186456087723032648753799500639301083120803887861774378127519055841200300722021908912663658736721808181905976614769167556777158540579802589251818342338664296892261598721223770948525882958989903498643844474443881365494366186879540743752522865890481258185661398661450145400174586954255798594980349336920287623171809337255391051615774034675800312569439495102693161753597894786106093813129941691167614502128824411906036203613374017421281859950157388018923162152170376719761094107244365793793801295386989614878789768675321459623423508501915602525045883285379171046365189543766620390254725283257987760524763324279709362246110807714160684401619696970071324975880463756403103367758616656042889802269384624618776702823507265083567950830141623483756155429929421201110837966736672631316515189583047632951808141375472573438564897736858285096083841743349704224813424575529979035722907751337333843039501444986132294183971798495102322118655423647575774638095594242360591296505782746376955904417512797972253837869914944669033112417910503764885109559325980725764019767086158860069193141356486082481913726565738118888937728005969856159005365510830407857091418962966413725423368585852851555226887522511422397080984203668781525866100305932014546262080118812816720718824780145563272508294470918608085953183530980510731638727137057868321337393052740572472450248506633407330366175138007347879323263799054516416812819059372532301524603584725802735622225698063481166985270568316890882163465835860871623940600102494748996263020577682569269241310711569600642071296841397219163311355761801485869653232991052823372343529891437871696801221125576878093230993279797781403517189023631723195830422007577725139506420863862974621850284828822685869365480256496976333059074849714862234685521871829072182677767188190862348091724309064749272794249063321076671908863590465544851797913038810912654892930058032156032696351232641701257308317843886563328321861571453054990391255663627593467645412053697784792717742627268539680491908356367887628950374547776804069405173086753558728381846453041208618750501774850530747859885695995496231795325167400822547623776548946062132824935065676526699584643380994341310235323423803547168908178861770343063137755745480312781418782959802518533071507405360815531786468005601078564554813901603820054611268663508697528768889628343605688404297049596482791202545704250698543069950757050521641770316863337335336374097309844944123604755575260516996650125261366737501014283681733536922919507996674711342574996766846101827584358457029128707686343622690042918038244648760087851393131630756512803773427475141968392096310643636596252141934565987883169137323589104391449442898909624179787394451054072973031385263786793430936247939167418114755343777822188531343229598604494060773257053675832346507949828487383790335973180102261516252489745244736999415636378666048565524416324310653091992191500157293663971772706090895913460914745069391507821607407119079643228761455973951456502533178244458604653367072208247136844293637699200643287171063323543071264194456731844289514661786350889430308378000623859334853499710695649927546553930859489538568835127452768087260261620951571152218348568929719647604673202322083355880695310174743610457469825948560363963194178330338717661812773680168893080697111977194694723029058532904402104183070246873285332971231965064831098195313946537722964800874303153979101249774266944684978714490326471233669690510878880297645474564156158989457731952855288748034996749984050907787463093200641078724037937331601107193002062607142334582424540462542816352856677028430889581264765717876678209615246507786765087872876579003133134698338624886416752381893452723012001163113113034922197348228234562972085324530558808215284683475788390241823026060297736587629192442326257690596727099898138760798059017319872806116456671050828020313857962939085308641728493147347650389662707609350511398801922499039899386427952050922079528229736915415528950729894659100857580760402504515924176805312456595928815847212576854617355993371686752308486259055225379546441735683459211531704159539586262195682060312819955077548305878239777757471000557642922054213570564468304657936112737638081857238134537386315694972456099757128283052159658267650533880688019165391968118081281418572817220462275354095675911862857058211998333039295198503759091340411472036588937341537552271364297296808196599896469985420092587035276351185574613124473842321798493624035111419325317850897416455727774208238005295335892784239401954079585688942640101642480065408491600871030419967385671210921727088593422109492170881430916530371486986686971893179090200174110704118528398366526522301044888669286343645609490666154720754657171877519877813139000560447086571004937715998070976628393081479513366020160880383038706268705059769497694751767397008507404890547604186839928221021081130399669544722546602362870171695433294206230069208750619380871523396740933288856122974393873962887381758634584423578738264291004803756667693477749360819940001322660377896176798306587817917609943785269138158184041529402848733581418435970591379579640302235388232907281284199927893644729185255896812857249736740795602912638601051604084121854664026333259636443490047737400712524052142271307557177223718644380878139570493348240315980414040990842347102940869097156488101725379568353259267160845887570740559432298975447149848219162771649962305998564786314810119846095164450874514679765632251834857079057499439224964428029230689670767926868233893624811244604947042834617117937781325965227897322350201659300730107372479967565853987915222243858706826074362840581263173370500381210792807269616977634478284528864656653006242682724878778575478820403482309832337875262464806318641026961704528234584790327235788301279412929095117115574048470611073342621092132524224703194743294571228199637561311515852979620659565423507311318322911676832898668803357039688818470609589490061266012753972229635450284942904935805351259449321417370363952663330002226053999399493976847878006553505003002533676884193556909119395229541876962621299266331597772792862940937809403184874617127502263870006274003996395442342544914195287826641488147525494349583796260659420495576612103430544473916322575699055751049631519785776017501968635137055395586847394685476923560018187033465205842282662951905109025241855539482267976015496469063313573187025125372844144112789403485535788540116915885225539663969928808185475616304765301116517349885884405936331731432533799211895827560075034225205924165278014787237312897593027269541326581114529418241899001721402798568503278671018513545279607071002575123250839676257547507012180306883245517988455725639614671335400322017336633978725979742406809739074434849713367788775483348859367482214591151331249276586343256589118221419004652757799426605306095828358930206405554016138060678689066724033378193562867612701651633762322211931899503103752940992724735568995777465669508965004589174674841147523988346199165253245051342943517043177839997415531126829623625481724245532036772982202357745923377157001238230272487833972522323652446141230855886193819231870646619031765335717267735528420507029371753881025064279991852598942752816765278530756485593015469375198540642186735935640796252013159144435726671556867762786118448141819542800058844475657676470805275223210876130937076711621603388815334555907099900749277080522449657647447293299167735864452743062486723899043202975481149688526255530815693291541173946373125044792210818218274971922456732957266689999701700514112728316579750910292054024386449681639908403523846060297088448251094358934090524965062651966798913985381364764384862824498058997947342392021595105265330929741553926731104482099695044837836713826596572513348637631899862407598711389056234111194498836994171142578125e-16447", 0, 0, 0);
  expect("rounding_subnormal0.5",  "182259976594123730126420296680970990819952540784678167186049024351418584431669886840478035431291360259862367367360176555098349281631101608498675403779490450274191129058896583928461263190281677987831078128299170536447015989677676363429562039997708640550775926919152302738435771122464765292985913410713131103376617773042203403962987686984411316948595140667733210597864690600010838133614601613871681951542280276489775942764960612766058558174381456923146501775692637508015664228929367328342904167452656185259699435199165429391997316125073430122973318829343522821181735512119859732943017878403356723899138210986814640887564778026842288063392332395425873162546186801975636139070797668304819972220170105852674422401098888180221895434381162451705845464727526614177730212750823552425549507762484741018808753638726079896241463208233641468961241718926107442376223082667022657044926746945053999973304249789647043354111258394904631316614206681676861518285530333635550805084849345427276340804672339278791177264322833523245464353153129378096510959641978734303986620037096633539629329212395162630085725125582600936685277823883492820153083593049415051104450437620211914690606070787926358977364081411635544299722928735751692643879771301240039585999097767207595829950175191441110017783298397938554546884420461552538187244104722816024213635806139907491818083029479760454178844362711626647761487494632027538147971912063924809690969103877295273058627398067023490884558283804713066036286365630374146882657021080984305152976459971071596872478304966869803153760915112192273767083898623101906331345170408354325877269319107750447803297770519645747631196394042357976659226774333324024028170376571419266465026123884210852547563237372731787743310739247077115755551931534219571260621965209529206118711148614230326874252623232432768485954951338025914378049849860538923653349006471371371975851619548239568383911087481548770985671906958133943927799958876422544137402326929408872363515336911744925148845142650068227520261364354697002916289429272868432749597813293152504173604381153301045168945974496048759541471080100519101973888604170033075957748634771829115251095545428834602408676747944708548838154240391870140692461377047103665770055763116743840798104372065112827921945625030361510289100654183705651174880622260739758549192434399417410164472062845437778260804090757560281944655628120766454222846704757309223464545058305531743779508241780347081470374488718989636990233738212174195604234593588461272325314215528265459543623864312796269176427251818027542711345978562318056661295241015095829415854218885612968394742320564741129353791774349282275541494026428939134920627812463726111753054622717119310116356020391377016695730659609458715794206834400971798313683173521572022151606820588780251530071841853198634516520873759366510045598375024838080906130739822646856203519935194543445776352574523286837269888247054743973982471908128830717347432604265401234817912837829289728424665952102694142190409017939355538720903773940059325978870813594819158491785411281829232728432185130930121677446908186036638626917272725653250577033788275532848525020676860268503396244010460868170366183668422400245220420698887085348274712352039989322593091109423678562877840971664204374301183812473393474181569023692824311977350780165916130639182603434989926970020331865584136555767033892083012035521577557018520518779278646965154203692177035106027598152525747997287067958495583828773920163969005601017367414626907539916022639742121376325089842645593155408913831923616011893504143113588169809756975685615156809718301077041526572845529202418627301258888257023010355646157596158820107337643411098344495769079824062658034841113036159712976090652715172861118398396463438153644617763942735713912193155539153353006222951965776408842015246576140657437291217544606529750759900127860216624160777572354875625503811168240060144404381782532731747344361636381195322953833511355431708115960517850363668467732859378452319744244754189705176591797980699728768894888776273098873237375908148750504573178096251637132279732290029080034917390851159718996069867384057524634361867451078210323154806935160062513887899020538632350719578957221218762625988338233522900425764882381207240722674803484256371990031477603784632430434075343952218821448873158758760259077397922975757953735064291924684701700383120505009176657075834209273037908753324078050945056651597552104952664855941872449222161542832136880323939394014264995176092751280620673551723331208577960453876924923755340564701453016713590166028324696751231085985884240222167593347334526263303037916609526590361628275094514687712979547371657019216768348669940844962684915105995807144581550267466768607900288997226458836794359699020464423731084729515154927619118848472118259301156549275391180883502559594450767573982988933806622483582100752977021911865196145152803953417231772013838628271297216496382745313147623777787545601193971231801073102166081571418283792593282745084673717170570311045377504502284479416196840733756305173220061186402909252416023762563344143764956029112654501658894183721617190636706196102146327745427411573664267478610548114494490049701326681466073235027601469575864652759810903283362563811874506460304920716945160547124445139612696233397054113663378176432693167172174324788120020498949799252604115536513853848262142313920128414259368279443832662271152360297173930646598210564674468705978287574339360244225115375618646198655959556280703437804726344639166084401515545027901284172772594924370056965764537173873096051299395266611814969942972446937104374365814436535553437638172469618344861812949854558849812664215334381772718093108970359582607762182530978586011606431206539270246528340251461663568777312665664372314290610998078251132725518693529082410739556958543548525453707936098381671273577525790074909555360813881034617350711745676369290608241723750100354970106149571977139199099246359065033480164509524755309789212426564987013135305339916928676198868262047064684760709433781635772354068612627551149096062556283756591960503706614301481072163106357293601120215712910962780320764010922253732701739505753777925668721137680859409919296558240509140850139708613990151410104328354063372667467067274819461968988824720951115052103399330025052273347500202856736346707384583901599334942268514999353369220365516871691405825741537268724538008583607648929752017570278626326151302560754685495028393678419262128727319250428386913197576633827464717820878289888579781924835957478890210814594606277052757358686187249587833483622951068755564437706268645919720898812154651410735166469301589965697476758067194636020452303250497949048947399883127275733209713104883264862130618398438300031458732794354541218179182692182949013878301564321481423815928645752291194790291300506635648891720930673414441649427368858727539840128657434212664708614252838891346368857902932357270177886061675600124771866970699942139129985509310786171897907713767025490553617452052324190314230443669713785943929520934640464416671176139062034948722091493965189712072792638835666067743532362554736033778616139422395438938944605811706580880420836614049374657066594246393012966219639062789307544592960174860630795820249954853388936995742898065294246733938102175776059529094912831231797891546390571057749606999349996810181557492618640128215744807587466320221438600412521428466916484908092508563270571335405686177916252953143575335641923049301557353017574575315800626626939667724977283350476378690544602400232622622606984439469645646912594417064906111761643056936695157678048364605212059547317525838488465251538119345419979627752159611803463974561223291334210165604062771592587817061728345698629469530077932541521870102279760384499807979877285590410184415905645947383083105790145978931820171516152080500903184835361062491319185763169442515370923471198674337350461697251811045075909288347136691842306340831907917252439136412062563991015509661175647955551494200111528584410842714112893660931587222547527616371447626907477263138994491219951425656610431931653530106776137603833078393623616256283714563444092455070819135182372571411642399666607859039700751818268082294407317787468307510454272859459361639319979293997084018517407055270237114922624894768464359698724807022283865063570179483291145554841647601059067178556847880390815917137788528020328496013081698320174206083993477134242184345417718684421898434176286183306074297397337394378635818040034822140823705679673305304460208977733857268729121898133230944150931434375503975562627800112089417314200987543199614195325678616295902673204032176076607741253741011953899538950353479401701480978109520837367985644204216226079933908944509320472574034339086658841246013841750123876174304679348186657771224594878774792577476351726916884715747652858200960751333538695549872163988000264532075579235359661317563583521988757053827631636808305880569746716283687194118275915928060447077646581456256839985578728945837051179362571449947348159120582527720210320816824370932805266651927288698009547480142504810428454261511435444743728876175627914098669648063196082808198168469420588173819431297620345075913670651853432169177514148111886459795089429969643832554329992461199712957262962023969219032890174902935953126450366971415811499887844992885605846137934153585373646778724962248920989408566923423587556265193045579464470040331860146021474495993513170797583044448771741365214872568116252634674100076242158561453923395526895656905772931330601248536544975755715095764080696461966467575052492961263728205392340905646916958065447157660255882585819023423114809694122214668524218426504844940638948658914245639927512262303170595924131913084701462263664582335366579733760671407937763694121917898012253202550794445927090056988580987161070251889864283474072790532666000445210799879898795369575601310701000600506735376838711381823879045908375392524259853266319554558572588187561880636974923425500452774001254800799279088468508982839057565328297629505098869916759252131884099115322420686108894783264515139811150209926303957155203500393727027411079117369478937095384712003637406693041168456532590381021805048371107896453595203099293812662714637405025074568828822557880697107157708023383177045107932793985761637095123260953060223303469977176881187266346286506759842379165512015006845041184833055602957447462579518605453908265316222905883648379800344280559713700655734203702709055921414200515024650167935251509501402436061376649103597691145127922934267080064403467326795745195948481361947814886969942673557755096669771873496442918230266249855317268651317823644283800930551559885321061219165671786041281110803227612135737813344806675638712573522540330326752464442386379900620750588198544947113799155493133901793000917834934968229504797669239833050649010268588703408635567999483106225365924725096344849106407354596440471549184675431400247646054497566794504464730489228246171177238763846374129323806353067143453547105684101405874350776205012855998370519788550563353055706151297118603093875039708128437347187128159250402631828887145334311373552557223689628363908560011768895131535294161055044642175226187415342324320677763066911181419980149855416104489931529489458659833547172890548612497344779808640595096229937705251106163138658308234789274625008958442163643654994384491346591453337999940340102822545663315950182058410804877289936327981680704769212059417689650218871786818104993012530393359782797076272952876972564899611799589468478404319021053066185948310785346220896419939008967567342765319314502669727526379972481519742277811246822238899767398834228515625e-16446", 0, 0, 0);
  expect("rounding_subnormal1.0",  "364519953188247460252840593361941981639905081569356334372098048702837168863339773680956070862582720519724734734720353110196698563262203216997350807558980900548382258117793167856922526380563355975662156256598341072894031979355352726859124079995417281101551853838304605476871542244929530585971826821426262206753235546084406807925975373968822633897190281335466421195729381200021676267229203227743363903084560552979551885529921225532117116348762913846293003551385275016031328457858734656685808334905312370519398870398330858783994632250146860245946637658687045642363471024239719465886035756806713447798276421973629281775129556053684576126784664790851746325092373603951272278141595336609639944440340211705348844802197776360443790868762324903411690929455053228355460425501647104851099015524969482037617507277452159792482926416467282937922483437852214884752446165334045314089853493890107999946608499579294086708222516789809262633228413363353723036571060667271101610169698690854552681609344678557582354528645667046490928706306258756193021919283957468607973240074193267079258658424790325260171450251165201873370555647766985640306167186098830102208900875240423829381212141575852717954728162823271088599445857471503385287759542602480079171998195534415191659900350382882220035566596795877109093768840923105076374488209445632048427271612279814983636166058959520908357688725423253295522974989264055076295943824127849619381938207754590546117254796134046981769116567609426132072572731260748293765314042161968610305952919942143193744956609933739606307521830224384547534167797246203812662690340816708651754538638215500895606595541039291495262392788084715953318453548666648048056340753142838532930052247768421705095126474745463575486621478494154231511103863068439142521243930419058412237422297228460653748505246464865536971909902676051828756099699721077847306698012942742743951703239096479136767822174963097541971343813916267887855599917752845088274804653858817744727030673823489850297690285300136455040522728709394005832578858545736865499195626586305008347208762306602090337891948992097519082942160201038203947777208340066151915497269543658230502191090857669204817353495889417097676308480783740281384922754094207331540111526233487681596208744130225655843891250060723020578201308367411302349761244521479517098384868798834820328944125690875556521608181515120563889311256241532908445693409514618446929090116611063487559016483560694162940748977437979273980467476424348391208469187176922544650628431056530919087247728625592538352854503636055085422691957124636113322590482030191658831708437771225936789484641129482258707583548698564551082988052857878269841255624927452223506109245434238620232712040782754033391461319218917431588413668801943596627366347043144044303213641177560503060143683706397269033041747518733020091196750049676161812261479645293712407039870389086891552705149046573674539776494109487947964943816257661434694865208530802469635825675658579456849331904205388284380818035878711077441807547880118651957741627189638316983570822563658465456864370261860243354893816372073277253834545451306501154067576551065697050041353720537006792488020921736340732367336844800490440841397774170696549424704079978645186182218847357125755681943328408748602367624946786948363138047385648623954701560331832261278365206869979853940040663731168273111534067784166024071043155114037041037558557293930308407384354070212055196305051495994574135916991167657547840327938011202034734829253815079832045279484242752650179685291186310817827663847232023787008286227176339619513951371230313619436602154083053145691058404837254602517776514046020711292315192317640214675286822196688991538159648125316069682226072319425952181305430345722236796792926876307289235527885471427824386311078306706012445903931552817684030493152281314874582435089213059501519800255720433248321555144709751251007622336480120288808763565065463494688723272762390645907667022710863416231921035700727336935465718756904639488489508379410353183595961399457537789777552546197746474751816297501009146356192503274264559464580058160069834781702319437992139734768115049268723734902156420646309613870320125027775798041077264701439157914442437525251976676467045800851529764762414481445349606968512743980062955207569264860868150687904437642897746317517520518154795845951515907470128583849369403400766241010018353314151668418546075817506648156101890113303195104209905329711883744898444323085664273760647878788028529990352185502561241347103446662417155920907753849847510681129402906033427180332056649393502462171971768480444335186694669052526606075833219053180723256550189029375425959094743314038433536697339881689925369830211991614289163100534933537215800577994452917673588719398040928847462169459030309855238237696944236518602313098550782361767005119188901535147965977867613244967164201505954043823730392290305607906834463544027677256542594432992765490626295247555575091202387942463602146204332163142836567585186565490169347434341140622090755009004568958832393681467512610346440122372805818504832047525126688287529912058225309003317788367443234381273412392204292655490854823147328534957221096228988980099402653362932146470055202939151729305519621806566725127623749012920609841433890321094248890279225392466794108227326756352865386334344348649576240040997899598505208231073027707696524284627840256828518736558887665324542304720594347861293196421129348937411956575148678720488450230751237292397311919112561406875609452689278332168803031090055802568345545189848740113931529074347746192102598790533223629939885944893874208748731628873071106875276344939236689723625899709117699625328430668763545436186217940719165215524365061957172023212862413078540493056680502923327137554625331328744628581221996156502265451037387058164821479113917087097050907415872196763342547155051580149819110721627762069234701423491352738581216483447500200709940212299143954278398198492718130066960329019049510619578424853129974026270610679833857352397736524094129369521418867563271544708137225255102298192125112567513183921007413228602962144326212714587202240431425821925560641528021844507465403479011507555851337442275361718819838593116481018281700279417227980302820208656708126745334934134549638923937977649441902230104206798660050104546695000405713472693414769167803198669884537029998706738440731033743382811651483074537449076017167215297859504035140557252652302605121509370990056787356838524257454638500856773826395153267654929435641756579777159563849671914957780421629189212554105514717372374499175666967245902137511128875412537291839441797624309302821470332938603179931394953516134389272040904606500995898097894799766254551466419426209766529724261236796876600062917465588709082436358365384365898027756603128642962847631857291504582389580582601013271297783441861346828883298854737717455079680257314868425329417228505677782692737715805864714540355772123351200249543733941399884278259971018621572343795815427534050981107234904104648380628460887339427571887859041869280928833342352278124069897444182987930379424145585277671332135487064725109472067557232278844790877877889211623413161760841673228098749314133188492786025932439278125578615089185920349721261591640499909706777873991485796130588493467876204351552119058189825662463595783092781142115499213998699993620363114985237280256431489615174932640442877200825042856933832969816185017126541142670811372355832505906287150671283846098603114706035149150631601253253879335449954566700952757381089204800465245245213968878939291293825188834129812223523286113873390315356096729210424119094635051676976930503076238690839959255504319223606927949122446582668420331208125543185175634123456691397258939060155865083043740204559520768999615959754571180820368831811291894766166211580291957863640343032304161001806369670722124982638371526338885030741846942397348674700923394503622090151818576694273383684612681663815834504878272824125127982031019322351295911102988400223057168821685428225787321863174445095055232742895253814954526277988982439902851313220863863307060213552275207666156787247232512567429126888184910141638270364745142823284799333215718079401503636536164588814635574936615020908545718918723278639958587994168037034814110540474229845249789536928719397449614044567730127140358966582291109683295202118134357113695760781631834275577056040656992026163396640348412167986954268484368690835437368843796868352572366612148594794674788757271636080069644281647411359346610608920417955467714537458243796266461888301862868751007951125255600224178834628401975086399228390651357232591805346408064352153215482507482023907799077900706958803402961956219041674735971288408432452159867817889018640945148068678173317682492027683500247752348609358696373315542449189757549585154952703453833769431495305716401921502667077391099744327976000529064151158470719322635127167043977514107655263273616611761139493432567374388236551831856120894155293162912513679971157457891674102358725142899894696318241165055440420641633648741865610533303854577396019094960285009620856908523022870889487457752351255828197339296126392165616396336938841176347638862595240690151827341303706864338355028296223772919590178859939287665108659984922399425914525924047938438065780349805871906252900733942831622999775689985771211692275868307170747293557449924497841978817133846847175112530386091158928940080663720292042948991987026341595166088897543482730429745136232505269348200152484317122907846791053791313811545862661202497073089951511430191528161392923932935150104985922527456410784681811293833916130894315320511765171638046846229619388244429337048436853009689881277897317828491279855024524606341191848263826169402924527329164670733159467521342815875527388243835796024506405101588891854180113977161974322140503779728566948145581065332000890421599759797590739151202621402001201013470753677422763647758091816750785048519706532639109117145176375123761273949846851000905548002509601598558176937017965678115130656595259010197739833518504263768198230644841372217789566529030279622300419852607914310407000787454054822158234738957874190769424007274813386082336913065180762043610096742215792907190406198587625325429274810050149137657645115761394214315416046766354090215865587971523274190246521906120446606939954353762374532692573013519684758331024030013690082369666111205914894925159037210907816530632445811767296759600688561119427401311468407405418111842828401030049300335870503019002804872122753298207195382290255845868534160128806934653591490391896962723895629773939885347115510193339543746992885836460532499710634537302635647288567601861103119770642122438331343572082562221606455224271475626689613351277425147045080660653504928884772759801241501176397089894227598310986267803586001835669869936459009595338479666101298020537177406817271135998966212450731849450192689698212814709192880943098369350862800495292108995133589008929460978456492342354477527692748258647612706134286907094211368202811748701552410025711996741039577101126706111412302594237206187750079416256874694374256318500805263657774290668622747105114447379256727817120023537790263070588322110089284350452374830684648641355526133822362839960299710832208979863058978917319667094345781097224994689559617281190192459875410502212326277316616469578549250017916884327287309988768982693182906675999880680205645091326631900364116821609754579872655963361409538424118835379300437743573636209986025060786719565594152545905753945129799223599178936956808638042106132371896621570692441792839878017935134685530638629005339455052759944963039484555622493644477799534797668457031250e-16446", 0, 0, 1);
  expect("rounding_subnormal1.5",  "546779929782371190379260890042912972459857622354034501558147073054255753295009660521434106293874080779587102102080529665295047844893304825496026211338471350822573387176689751785383789570845033963493234384897511609341047969033029090288686119993125921652327780757456908215307313367394295878957740232139393310129853319126610211888963060953233950845785422003199631793594071800032514400843804841615045854626840829469327828294881838298175674523144370769439505327077912524046992686788101985028712502357968555779098305597496288175991948375220290368919956488030568463545206536359579198829053635210070171697414632960443922662694334080526864190176997186277619487638560405926908417212393004914459916660510317558023267203296664540665686303143487355117536394182579842533190638252470657276648523287454223056426260916178239688724389624700924406883725156778322327128669248001067971134780240835161999919912749368941130062333775184713893949842620045030584554856591000906652415254548036281829022414017017836373531792968500569736393059459388134289532878925936202911959860111289900618887987637185487890257175376747802810055833471650478460459250779148245153313351312860635744071818212363779076932092244234906632899168786207255077931639313903720118757997293301622787489850525574323330053349895193815663640653261384657614561732314168448072640907418419722475454249088439281362536533088134879943284462483896082614443915736191774429072907311631885819175882194201070472653674851414139198108859096891122440647971063242952915458929379913214790617434914900609409461282745336576821301251695869305718994035511225062977631807957323251343409893311558937242893589182127073929977680322999972072084511129714257799395078371652632557642689712118195363229932217741231347266655794602658713781865895628587618356133445842690980622757869697298305457864854014077743134149549581616770960047019414114115927554858644718705151733262444646312957015720874401831783399876629267632412206980788226617090546010735234775446535427950204682560784093064091008748868287818605298248793439879457512520813143459903135506837923488146278624413240301557305921665812510099227873245904315487345753286636286503807226030243834125646514462721175610422077384131141310997310167289350231522394313116195338483765836875091084530867301962551116953524641866782219275647577303198252230493416188536313334782412272272680845833966884362299362668540114271927670393635174916595231338524725341041244411123466156968910970701214636522586812703780765383816975942646584796378630871592938388807529281755454082628134037935686954169983885723045287488247562656656838905184226961694223388061375323047846826624482079286817404761883437391178335259163868151357930349068061174131050087191978828376147382620503202915394941049520564716066454820461766340754590215525559595903549562621278099530136795125074514242718392219467940568610559805583630337329057723569860511809664741164231921947415724386492152042297812796203704453738513487869185273997856308082426571227053818066616162711321820177977936612440784457475475356233845487698185296555392790365032340724558109915880751818176959751731101364826598545575062030580805510188732031382604511098551005267200735661262096661256044824137056119967967779273328271035688633522914992613122903551437420180422544707071078472935932052340497748391917547810304969780910060995596752409667301101676249036106564732671055561556337835940895462611076531105318082794457577243991861203875486751486321760491907016803052102243880722619748067919226364128975269527936779466226741495770848035680512429340764509429270927056845470429154903231124579718536587607255881903776664771069031066938472788476460322012930233295033487307239472187974104523339108479138928271958145518583355195189390314460933853291828207141736579466617460059018668855897329226526045739728421972311873652633819589252279700383580649872482332717064626876511433504720180433213145347598195242033084909143585968861500534066295124347881553551091005403198578135356959232734262569115529775393942099186306684666328819296619712127724446251513719534288754911396839196870087240104752172553479156988209602152172573903085602353234630969464420805480187541663697061615897052158736871663656287877965014700568701277294647143621722168024410452769115970094432811353897291302226031856656464346619476276280777232193768927273861205192875774054105101149361515027529971227502627819113726259972234152835169954792656314857994567825617347666484628496410640971818182042794985528278253841862020655169993625733881361630774771266021694104359050140770498084974090253693257957652720666502780042003578789909113749828579771084884825283544063138938642114971057650305046009822534888054745317987421433744650802400305823700866991679376510383079097061393271193254188545464782857356545416354777903469647826173542650507678783352302721948966801419867450746302258931065735595588435458411860251695316041515884813891649489148235939442871333362636803581913695403219306498244714254851377779848235254021151511710933136132513506853438248590522201268915519660183559208727757248071287690032431294868087337963504976682551164851571910118588306438983236282234720992802435831644343483470149103980044398219705082804408727593958279432709850087691435623519380914762150835481641373335418838088700191162340990134529298079501516522974364360061496849397757812346609541561544786426941760385242778104838331497986813457080891521791939794631694023406117934862723018080732675346126855938595967878668842110313414179033917498253204546635083703852518317784773110170897293611521619288153898185799835444909828917340811313123097443309606660312914517408855034585438849563676549437992646003145318154279326911078747823286547592935758034819293619617810739585020754384990706331937996993116942871832994234753398176556080587247232218670875630645576361123808295145013820732577370224728666082441643103852052135237029107871824725171250301064910318448715931417597297739077195100440493528574265929367637279694961039405916019750786028596604786141194054282128301344907317062205837882653447288187668851269775881511119842904443216489319071880803360647138732888340962292032766761198105218517261333777006163413042578229757889674721527422550419125841970454230312985062190118002401201824458385906966474162853345156310197990075156820042500608570209040122153751704798004826805544998060107661096550615074217477224611806173614025750822946789256052710835878978453907682264056485085181035257786386181957751285160739592729901482394153462634869665739345774507872436670632443783818831158272076058561748763500450868853206266693313118805937759162696436463954232205499407904769897092430274201583908061356909751493847146842199649381827199629139314649794586391855195314900094376198383063623654537548076548847041634904692964444271447785937256873584370873901519906946675162792020243324948282106576182619520385972302637994125842758516674039106573708797071810533658185026800374315600912099826417389956527932358515693723141301076471660852356156972570942691331009141357831788562803921393250013528417186104846166274481895569136218377916506998203230597087664208101335848418267186316816833817435119742641262509842148123971199782739179038898658917188367922633778880524581892387460749864560166810987228694195882740201814306527328178587284738493695393674639171713173248820998049990430544672477855920384647234422762398960664315801237564285400749454724277525689811714006217058533748758859430726006925769147904672059052723725947401879880819003174931850051429136071633807200697867867820953318408936940737783251194718335284929170810085473034145093815636178641952577515465395754614358036259938883256478835410391923683669874002630496812188314777763451185185037095888408590233797624565610306839281153499423939631856771230553247716937842149249317370437936795460514548456241502709554506083187473957557289508327546112770413596023012051385091755433135227727865041410075526919022495723751757317409236187691973046528983526943866654482600334585753232528142338680982794761667642582849114342880722431789416983473659854276969831295794960590320328412811499235180870848768851143690332277365212457405547117714234927198999823577119102255454804246883221953362404922531362818578378084917959937881991252055552221165810711344767874684305393079096174421066851595190710538449873436664524942803177201535670543641172447751413365584060985488039245094960522618251980431402726553036253156053265695302528858549918222892192012183135907454120104466422471117039019915913380626933201571806187365694399692832452794303126511926687883400336268251942602962629598842585977035848887708019612096528229823223761223035861698616851060438205104442934328562512103956932612648678239801726833527961417722103017259976523738041525250371628522914038044559973313673784636324377732429055180750654147242958574602882254000616086649616491964000793596226737706078983952690750565966271161482894910424917641709240148851061582354827747784181341232939744368770519956736186837511153538087714349842044477361747583160630962450473112798415799955781866094028642440427514431285362784534306334231186628526883742296008944189588248424594505408261764521458293892861035227741011955560296507532542444335659379385268289908931497662989977383599138871788886071907657098670524708807859379351100914247434499663534978656817538413802460756120940336174886746762968225700770270762668795579136738393410120995580438064423487980539512392749133346315224095644617704348757904022300228726475684361770186580686970717318793991803745609634927267145287292242089385899402725157478883791184616177022716940750874196341472980767647757457070269344429082366644005572655279514534821916845976742736919782536786909511787772395739254104386790993747006099739201282014223813291082365753694036759607652383337781270170965742961483210755669592850422218371597998001335632399639696386108726803932103001801520206130516134145471637137725126177572779559798958663675717764562685641910924770276501358322003764402397837265405526948517172695984892888515296609750277756395652297345967262058326684349793545419433450629778911871465610501181181082233237352108436811286154136010912220079123505369597771143065415145113323689360785609297881437988143912215075223706486467673642091321473124070149531135323798381957284911285369782859180669910409931530643561799038859520279527137496536045020535123554499166808872342387738555816361724795948668717650945139401032841679141101967202611108127167764242601545073950503805754528504207308184129947310793073435383768802801240193210401980387235587845444085843444660909828020673265290009315620489328754690798749565951805953953470932851402791654679655963183657497015358123843332409682836407213440034420026916137720567620990980257393327159139701862251764595634841341397466479401705379002753504804904688514393007719499151947030805766110225906703998449318676097774175289034547319222063789321414647554026294200742938163492700383513394191467684738513531716291539122387971419059201430360641317052304217623052328615038567995111559365651690059167118453891355809281625119124385312041561384477751207895486661436002934120657671671068885091725680035306685394605882483165133926525678562246026972962033289200733544259940449566248313469794588468375979500641518671645837492034339425921785288689813115753318489415974924704367823875026875326490930964983153474039774360013999821020308467636989947850546175232414631869808983945042114307636178253068950656615360454314979037591180079348391228818858630917694698835398768405435212957063159198557844932356038662689259817026902702028295957943508009182579139917444559226833433740466716699302196502685546875e-16446", 0, 0, 2);  /* Rounds up to nearest even (2). */
  expect("rounding_subnormal2.0",  "729039906376494920505681186723883963279810163138712668744196097405674337726679547361912141725165441039449469469440706220393397126524406433994701615117961801096764516235586335713845052761126711951324312513196682145788063958710705453718248159990834562203103707676609210953743084489859061171943653642852524413506471092168813615851950747937645267794380562670932842391458762400043352534458406455486727806169121105959103771059842451064234232697525827692586007102770550032062656915717469313371616669810624741038797740796661717567989264500293720491893275317374091284726942048479438931772071513613426895596552843947258563550259112107369152253569329581703492650184747207902544556283190673219279888880680423410697689604395552720887581737524649806823381858910106456710920851003294209702198031049938964075235014554904319584965852832934565875844966875704429769504892330668090628179706987780215999893216999158588173416445033579618525266456826726707446073142121334542203220339397381709105363218689357115164709057291334092981857412612517512386043838567914937215946480148386534158517316849580650520342900502330403746741111295533971280612334372197660204417801750480847658762424283151705435909456325646542177198891714943006770575519085204960158343996391068830383319800700765764440071133193591754218187537681846210152748976418891264096854543224559629967272332117919041816715377450846506591045949978528110152591887648255699238763876415509181092234509592268093963538233135218852264145145462521496587530628084323937220611905839884286387489913219867479212615043660448769095068335594492407625325380681633417303509077276431001791213191082078582990524785576169431906636907097333296096112681506285677065860104495536843410190252949490927150973242956988308463022207726136878285042487860838116824474844594456921307497010492929731073943819805352103657512199399442155694613396025885485487903406478192958273535644349926195083942687627832535775711199835505690176549609307717635489454061347646979700595380570600272910081045457418788011665157717091473730998391253172610016694417524613204180675783897984195038165884320402076407895554416680132303830994539087316461004382181715338409634706991778834195352616961567480562769845508188414663080223052466975363192417488260451311687782500121446041156402616734822604699522489042959034196769737597669640657888251381751113043216363030241127778622512483065816891386819029236893858180233222126975118032967121388325881497954875958547960934952848696782416938374353845089301256862113061838174495457251185076705709007272110170845383914249272226645180964060383317663416875542451873578969282258964517415167097397129102165976105715756539682511249854904447012218490868477240465424081565508066782922638437834863176827337603887193254732694086288088606427282355121006120287367412794538066083495037466040182393500099352323624522959290587424814079740778173783105410298093147349079552988218975895929887632515322869389730417061604939271651351317158913698663808410776568761636071757422154883615095760237303915483254379276633967141645127316930913728740523720486709787632744146554507669090902613002308135153102131394100082707441074013584976041843472681464734673689600980881682795548341393098849408159957290372364437694714251511363886656817497204735249893573896726276094771297247909403120663664522556730413739959707880081327462336546223068135568332048142086310228074082075117114587860616814768708140424110392610102991989148271833982335315095680655876022404069469658507630159664090558968485505300359370582372621635655327694464047574016572454352679239027902742460627238873204308166106291382116809674509205035553028092041422584630384635280429350573644393377983076319296250632139364452144638851904362610860691444473593585853752614578471055770942855648772622156613412024891807863105635368060986304562629749164870178426119003039600511440866496643110289419502502015244672960240577617527130130926989377446545524781291815334045421726832463842071401454673870931437513809278976979016758820706367191922798915075579555105092395492949503632595002018292712385006548529118929160116320139669563404638875984279469536230098537447469804312841292619227740640250055551596082154529402878315828884875050503953352934091601703059529524828962890699213937025487960125910415138529721736301375808875285795492635035041036309591691903031814940257167698738806801532482020036706628303336837092151635013296312203780226606390208419810659423767489796888646171328547521295757576057059980704371005122482694206893324834311841815507699695021362258805812066854360664113298787004924343943536960888670373389338105053212151666438106361446513100378058750851918189486628076867073394679763379850739660423983228578326201069867074431601155988905835347177438796081857694924338918060619710476475393888473037204626197101564723534010238377803070295931955735226489934328403011908087647460784580611215813668927088055354513085188865985530981252590495111150182404775884927204292408664326285673135170373130980338694868682281244181510018009137917664787362935025220692880244745611637009664095050253376575059824116450618006635576734886468762546824784408585310981709646294657069914442192457977960198805306725864292940110405878303458611039243613133450255247498025841219682867780642188497780558450784933588216454653512705730772668688697299152480081995799197010416462146055415393048569255680513657037473117775330649084609441188695722586392842258697874823913150297357440976900461502474584794623838225122813751218905378556664337606062180111605136691090379697480227863058148695492384205197581066447259879771889787748417497463257746142213750552689878473379447251799418235399250656861337527090872372435881438330431048730123914344046425724826157080986113361005846654275109250662657489257162443992313004530902074774116329642958227834174194101814831744393526685094310103160299638221443255524138469402846982705477162432966895000401419880424598287908556796396985436260133920658038099021239156849706259948052541221359667714704795473048188258739042837735126543089416274450510204596384250225135026367842014826457205924288652425429174404480862851643851121283056043689014930806958023015111702674884550723437639677186232962036563400558834455960605640417313416253490669868269099277847875955298883804460208413597320100209093390000811426945386829538335606397339769074059997413476881462067486765623302966149074898152034334430595719008070281114505304605210243018741980113574713677048514909277001713547652790306535309858871283513159554319127699343829915560843258378425108211029434744748998351333934491804275022257750825074583678883595248618605642940665877206359862789907032268778544081809213001991796195789599532509102932838852419533059448522473593753200125834931177418164872716730768731796055513206257285925695263714583009164779161165202026542595566883722693657766597709475434910159360514629736850658834457011355565385475431611729429080711544246702400499087467882799768556519942037243144687591630855068101962214469808209296761256921774678855143775718083738561857666684704556248139794888365975860758848291170555342664270974129450218944135114464557689581755755778423246826323521683346456197498628266376985572051864878556251157230178371840699442523183280999819413555747982971592261176986935752408703104238116379651324927191566185562284230998427997399987240726229970474560512862979230349865280885754401650085713867665939632370034253082285341622744711665011812574301342567692197206229412070298301263202506507758670899909133401905514762178409600930490490427937757878582587650377668259624447046572227746780630712193458420848238189270103353953861006152477381679918511008638447213855898244893165336840662416251086370351268246913382794517878120311730166087480409119041537999231919509142361640737663622583789532332423160583915727280686064608322003612739341444249965276743052677770061483693884794697349401846789007244180303637153388546767369225363327631669009756545648250255964062038644702591822205976800446114337643370856451574643726348890190110465485790507629909052555977964879805702626441727726614120427104550415332313574494465025134858253776369820283276540729490285646569598666431436158803007273072329177629271149873230041817091437837446557279917175988336074069628221080948459690499579073857438794899228089135460254280717933164582219366590404236268714227391521563263668551154112081313984052326793280696824335973908536968737381670874737687593736705144733224297189589349577514543272160139288563294822718693221217840835910935429074916487592532923776603725737502015902250511200448357669256803950172798456781302714465183610692816128704306430965014964047815598155801413917606805923912438083349471942576816864904319735635778037281890296137356346635364984055367000495504697218717392746631084898379515099170309905406907667538862990611432803843005334154782199488655952001058128302316941438645270254334087955028215310526547233223522278986865134748776473103663712241788310586325825027359942314915783348204717450285799789392636482330110880841283267297483731221066607709154792038189920570019241713817046045741778974915504702511656394678592252784331232792673877682352695277725190481380303654682607413728676710056592447545839180357719878575330217319969844798851829051848095876876131560699611743812505801467885663245999551379971542423384551736614341494587114899848995683957634267693694350225060772182317857880161327440584085897983974052683190332177795086965460859490272465010538696400304968634245815693582107582627623091725322404994146179903022860383056322785847865870300209971845054912821569363622587667832261788630641023530343276093692459238776488858674096873706019379762555794635656982559710049049212682383696527652338805849054658329341466318935042685631751054776487671592049012810203177783708360227954323948644281007559457133896291162130664001780843199519595181478302405242804002402026941507354845527295516183633501570097039413065278218234290352750247522547899693702001811096005019203197116353874035931356230261313190518020395479667037008527536396461289682744435579133058060559244600839705215828620814001574908109644316469477915748381538848014549626772164673826130361524087220193484431585814380812397175250650858549620100298275315290231522788428630832093532708180431731175943046548380493043812240893213879908707524749065385146027039369516662048060027380164739332222411829789850318074421815633061264891623534593519201377122238854802622936814810836223685656802060098600671741006038005609744245506596414390764580511691737068320257613869307182980783793925447791259547879770694231020386679087493985771672921064999421269074605271294577135203722206239541284244876662687144165124443212910448542951253379226702554850294090161321307009857769545519602483002352794179788455196621972535607172003671339739872918019190676959332202596041074354813634542271997932424901463698900385379396425629418385761886196738701725600990584217990267178017858921956912984684708955055385496517295225412268573814188422736405623497403104820051423993482079154202253412222824605188474412375500158832513749388748512637001610527315548581337245494210228894758513455634240047075580526141176644220178568700904749661369297282711052267644725679920599421664417959726117957834639334188691562194449989379119234562380384919750821004424652554633232939157098500035833768654574619977537965386365813351999761360411290182653263800728233643219509159745311926722819076848237670758600875487147272419972050121573439131188305091811507890259598447198357873913617276084212264743793243141384883585679756035870269371061277258010678910105519889926078969111244987288955599069595336914062500e-16446", 0, 0, 2);
  expect("rounding_subnormal2.5",  "911299882970618650632101483404854954099762703923390835930245121757092922158349434202390177156456801299311836836800882775491746408155508042493377018897452251370955645294482919642306315951408389939155390641495852682235079948388381817147810199988543202753879634595761513692178855612323826464929567053565655516883088865211017019814938434922056584742975703338666052989323453000054190668073008069358409757711401382448879713824803063830292790871907284615732508878463187540078321144646836641714520837263280926298497175995827146959986580625367150614866594146717614105908677560599298664715089392016783619495691054934073204437823890134211440316961661977129365812730934009878180695353988341524099861100850529263372112005494440901109477171905812258529227323637633070888651063754117762127747538812423705094043768193630399481207316041168207344806208594630537211881115413335113285224633734725269999866521248948235216770556291974523156583071033408384307591427651668177754025424246727136381704023361696393955886321614167616227321765765646890482554798209893671519933100185483167698146646061975813150428625627913004683426389119417464100765417965247075255522252188101059573453030353939631794886820407058177721498614643678758463219398856506200197929995488836037979149750875957205550088916491989692772734422102307762690936220523614080121068179030699537459090415147398802270894221813558133238807437473160137690739859560319624048454845519386476365293136990335117454422791419023565330181431828151870734413285105404921525764882299855357984362391524834349015768804575560961368835419493115509531656725852041771629386346595538752239016488852598228738155981970211789883296133871666620120140851882857096332325130619421054262737816186863658938716553696235385578777759657671097856303109826047646030593555743071151634371263116162163842429774756690129571890249249302694618266745032356856859879258097741197841919555437407743854928359534790669719638999794382112720687011634647044361817576684558724625744225713250341137601306821773485014581447146364342163747989066465762520868021905766505225844729872480243797707355400502595509869443020850165379788743173859145576255477727144173012043383739723542744190771201959350703462306885235518328850278815583719203990521860325564139609728125151807551445503270918528255874403111303698792745962171997087050822360314227188891304020453787801409723278140603832271114233523786546117322725291527658718897541208901735407351872443594948184951168691060870978021172967942306361626571077641327297718119321563981345882136259090137713556729892811590283306476205075479147079271094428064841973711602823705646768958871746411377707470132144695674603139062318630558765273113585596550581780101956885083478653298047293578971034172004858991568415867607860110758034102943901257650359209265993172582604368796832550227991875124190404530653699113234281017599675972717228881762872616434186349441235273719869912359540644153586737163021327006174089564189146448642123329760513470710952045089696777693604518869700296629894354067974095792458927056409146163642160925654650608387234540930183193134586363628266252885168941377664242625103384301342516981220052304340851830918342112001226102103494435426741373561760199946612965455547118392814389204858321021871505919062366967370907845118464121559886753900829580653195913017174949634850101659327920682778835169460415060177607887785092602593896393234825771018460885175530137990762628739986435339792477919143869600819845028005086837073134537699580113198710606881625449213227965777044569159618080059467520715567940849048784878428075784048591505385207632864227646012093136506294441285115051778230787980794100536688217055491722478845399120313290174205565180798564880453263575864305591991982317190768223088819713678569560965777695766765031114759828882044210076232880703287186456087723032648753799500639301083120803887861774378127519055841200300722021908912663658736721808181905976614769167556777158540579802589251818342338664296892261598721223770948525882958989903498643844474443881365494366186879540743752522865890481258185661398661450145400174586954255798594980349336920287623171809337255391051615774034675800312569439495102693161753597894786106093813129941691167614502128824411906036203613374017421281859950157388018923162152170376719761094107244365793793801295386989614878789768675321459623423508501915602525045883285379171046365189543766620390254725283257987760524763324279709362246110807714160684401619696970071324975880463756403103367758616656042889802269384624618776702823507265083567950830141623483756155429929421201110837966736672631316515189583047632951808141375472573438564897736858285096083841743349704224813424575529979035722907751337333843039501444986132294183971798495102322118655423647575774638095594242360591296505782746376955904417512797972253837869914944669033112417910503764885109559325980725764019767086158860069193141356486082481913726565738118888937728005969856159005365510830407857091418962966413725423368585852851555226887522511422397080984203668781525866100305932014546262080118812816720718824780145563272508294470918608085953183530980510731638727137057868321337393052740572472450248506633407330366175138007347879323263799054516416812819059372532301524603584725802735622225698063481166985270568316890882163465835860871623940600102494748996263020577682569269241310711569600642071296841397219163311355761801485869653232991052823372343529891437871696801221125576878093230993279797781403517189023631723195830422007577725139506420863862974621850284828822685869365480256496976333059074849714862234685521871829072182677767188190862348091724309064749272794249063321076671908863590465544851797913038810912654892930058032156032696351232641701257308317843886563328321861571453054990391255663627593467645412053697784792717742627268539680491908356367887628950374547776804069405173086753558728381846453041208618750501774850530747859885695995496231795325167400822547623776548946062132824935065676526699584643380994341310235323423803547168908178861770343063137755745480312781418782959802518533071507405360815531786468005601078564554813901603820054611268663508697528768889628343605688404297049596482791202545704250698543069950757050521641770316863337335336374097309844944123604755575260516996650125261366737501014283681733536922919507996674711342574996766846101827584358457029128707686343622690042918038244648760087851393131630756512803773427475141968392096310643636596252141934565987883169137323589104391449442898909624179787394451054072973031385263786793430936247939167418114755343777822188531343229598604494060773257053675832346507949828487383790335973180102261516252489745244736999415636378666048565524416324310653091992191500157293663971772706090895913460914745069391507821607407119079643228761455973951456502533178244458604653367072208247136844293637699200643287171063323543071264194456731844289514661786350889430308378000623859334853499710695649927546553930859489538568835127452768087260261620951571152218348568929719647604673202322083355880695310174743610457469825948560363963194178330338717661812773680168893080697111977194694723029058532904402104183070246873285332971231965064831098195313946537722964800874303153979101249774266944684978714490326471233669690510878880297645474564156158989457731952855288748034996749984050907787463093200641078724037937331601107193002062607142334582424540462542816352856677028430889581264765717876678209615246507786765087872876579003133134698338624886416752381893452723012001163113113034922197348228234562972085324530558808215284683475788390241823026060297736587629192442326257690596727099898138760798059017319872806116456671050828020313857962939085308641728493147347650389662707609350511398801922499039899386427952050922079528229736915415528950729894659100857580760402504515924176805312456595928815847212576854617355993371686752308486259055225379546441735683459211531704159539586262195682060312819955077548305878239777757471000557642922054213570564468304657936112737638081857238134537386315694972456099757128283052159658267650533880688019165391968118081281418572817220462275354095675911862857058211998333039295198503759091340411472036588937341537552271364297296808196599896469985420092587035276351185574613124473842321798493624035111419325317850897416455727774208238005295335892784239401954079585688942640101642480065408491600871030419967385671210921727088593422109492170881430916530371486986686971893179090200174110704118528398366526522301044888669286343645609490666154720754657171877519877813139000560447086571004937715998070976628393081479513366020160880383038706268705059769497694751767397008507404890547604186839928221021081130399669544722546602362870171695433294206230069208750619380871523396740933288856122974393873962887381758634584423578738264291004803756667693477749360819940001322660377896176798306587817917609943785269138158184041529402848733581418435970591379579640302235388232907281284199927893644729185255896812857249736740795602912638601051604084121854664026333259636443490047737400712524052142271307557177223718644380878139570493348240315980414040990842347102940869097156488101725379568353259267160845887570740559432298975447149848219162771649962305998564786314810119846095164450874514679765632251834857079057499439224964428029230689670767926868233893624811244604947042834617117937781325965227897322350201659300730107372479967565853987915222243858706826074362840581263173370500381210792807269616977634478284528864656653006242682724878778575478820403482309832337875262464806318641026961704528234584790327235788301279412929095117115574048470611073342621092132524224703194743294571228199637561311515852979620659565423507311318322911676832898668803357039688818470609589490061266012753972229635450284942904935805351259449321417370363952663330002226053999399493976847878006553505003002533676884193556909119395229541876962621299266331597772792862940937809403184874617127502263870006274003996395442342544914195287826641488147525494349583796260659420495576612103430544473916322575699055751049631519785776017501968635137055395586847394685476923560018187033465205842282662951905109025241855539482267976015496469063313573187025125372844144112789403485535788540116915885225539663969928808185475616304765301116517349885884405936331731432533799211895827560075034225205924165278014787237312897593027269541326581114529418241899001721402798568503278671018513545279607071002575123250839676257547507012180306883245517988455725639614671335400322017336633978725979742406809739074434849713367788775483348859367482214591151331249276586343256589118221419004652757799426605306095828358930206405554016138060678689066724033378193562867612701651633762322211931899503103752940992724735568995777465669508965004589174674841147523988346199165253245051342943517043177839997415531126829623625481724245532036772982202357745923377157001238230272487833972522323652446141230855886193819231870646619031765335717267735528420507029371753881025064279991852598942752816765278530756485593015469375198540642186735935640796252013159144435726671556867762786118448141819542800058844475657676470805275223210876130937076711621603388815334555907099900749277080522449657647447293299167735864452743062486723899043202975481149688526255530815693291541173946373125044792210818218274971922456732957266689999701700514112728316579750910292054024386449681639908403523846060297088448251094358934090524965062651966798913985381364764384862824498058997947342392021595105265330929741553926731104482099695044837836713826596572513348637631899862407598711389056234111194498836994171142578125e-16446", 0, 0, 2);  /* Rounds down to nearest even (2). */
  expect("rounding_subnormal2.5+", "911299882970618650632101483404854954099762703923390835930245121757092922158349434202390177156456801299311836836800882775491746408155508042493377018897452251370955645294482919642306315951408389939155390641495852682235079948388381817147810199988543202753879634595761513692178855612323826464929567053565655516883088865211017019814938434922056584742975703338666052989323453000054190668073008069358409757711401382448879713824803063830292790871907284615732508878463187540078321144646836641714520837263280926298497175995827146959986580625367150614866594146717614105908677560599298664715089392016783619495691054934073204437823890134211440316961661977129365812730934009878180695353988341524099861100850529263372112005494440901109477171905812258529227323637633070888651063754117762127747538812423705094043768193630399481207316041168207344806208594630537211881115413335113285224633734725269999866521248948235216770556291974523156583071033408384307591427651668177754025424246727136381704023361696393955886321614167616227321765765646890482554798209893671519933100185483167698146646061975813150428625627913004683426389119417464100765417965247075255522252188101059573453030353939631794886820407058177721498614643678758463219398856506200197929995488836037979149750875957205550088916491989692772734422102307762690936220523614080121068179030699537459090415147398802270894221813558133238807437473160137690739859560319624048454845519386476365293136990335117454422791419023565330181431828151870734413285105404921525764882299855357984362391524834349015768804575560961368835419493115509531656725852041771629386346595538752239016488852598228738155981970211789883296133871666620120140851882857096332325130619421054262737816186863658938716553696235385578777759657671097856303109826047646030593555743071151634371263116162163842429774756690129571890249249302694618266745032356856859879258097741197841919555437407743854928359534790669719638999794382112720687011634647044361817576684558724625744225713250341137601306821773485014581447146364342163747989066465762520868021905766505225844729872480243797707355400502595509869443020850165379788743173859145576255477727144173012043383739723542744190771201959350703462306885235518328850278815583719203990521860325564139609728125151807551445503270918528255874403111303698792745962171997087050822360314227188891304020453787801409723278140603832271114233523786546117322725291527658718897541208901735407351872443594948184951168691060870978021172967942306361626571077641327297718119321563981345882136259090137713556729892811590283306476205075479147079271094428064841973711602823705646768958871746411377707470132144695674603139062318630558765273113585596550581780101956885083478653298047293578971034172004858991568415867607860110758034102943901257650359209265993172582604368796832550227991875124190404530653699113234281017599675972717228881762872616434186349441235273719869912359540644153586737163021327006174089564189146448642123329760513470710952045089696777693604518869700296629894354067974095792458927056409146163642160925654650608387234540930183193134586363628266252885168941377664242625103384301342516981220052304340851830918342112001226102103494435426741373561760199946612965455547118392814389204858321021871505919062366967370907845118464121559886753900829580653195913017174949634850101659327920682778835169460415060177607887785092602593896393234825771018460885175530137990762628739986435339792477919143869600819845028005086837073134537699580113198710606881625449213227965777044569159618080059467520715567940849048784878428075784048591505385207632864227646012093136506294441285115051778230787980794100536688217055491722478845399120313290174205565180798564880453263575864305591991982317190768223088819713678569560965777695766765031114759828882044210076232880703287186456087723032648753799500639301083120803887861774378127519055841200300722021908912663658736721808181905976614769167556777158540579802589251818342338664296892261598721223770948525882958989903498643844474443881365494366186879540743752522865890481258185661398661450145400174586954255798594980349336920287623171809337255391051615774034675800312569439495102693161753597894786106093813129941691167614502128824411906036203613374017421281859950157388018923162152170376719761094107244365793793801295386989614878789768675321459623423508501915602525045883285379171046365189543766620390254725283257987760524763324279709362246110807714160684401619696970071324975880463756403103367758616656042889802269384624618776702823507265083567950830141623483756155429929421201110837966736672631316515189583047632951808141375472573438564897736858285096083841743349704224813424575529979035722907751337333843039501444986132294183971798495102322118655423647575774638095594242360591296505782746376955904417512797972253837869914944669033112417910503764885109559325980725764019767086158860069193141356486082481913726565738118888937728005969856159005365510830407857091418962966413725423368585852851555226887522511422397080984203668781525866100305932014546262080118812816720718824780145563272508294470918608085953183530980510731638727137057868321337393052740572472450248506633407330366175138007347879323263799054516416812819059372532301524603584725802735622225698063481166985270568316890882163465835860871623940600102494748996263020577682569269241310711569600642071296841397219163311355761801485869653232991052823372343529891437871696801221125576878093230993279797781403517189023631723195830422007577725139506420863862974621850284828822685869365480256496976333059074849714862234685521871829072182677767188190862348091724309064749272794249063321076671908863590465544851797913038810912654892930058032156032696351232641701257308317843886563328321861571453054990391255663627593467645412053697784792717742627268539680491908356367887628950374547776804069405173086753558728381846453041208618750501774850530747859885695995496231795325167400822547623776548946062132824935065676526699584643380994341310235323423803547168908178861770343063137755745480312781418782959802518533071507405360815531786468005601078564554813901603820054611268663508697528768889628343605688404297049596482791202545704250698543069950757050521641770316863337335336374097309844944123604755575260516996650125261366737501014283681733536922919507996674711342574996766846101827584358457029128707686343622690042918038244648760087851393131630756512803773427475141968392096310643636596252141934565987883169137323589104391449442898909624179787394451054072973031385263786793430936247939167418114755343777822188531343229598604494060773257053675832346507949828487383790335973180102261516252489745244736999415636378666048565524416324310653091992191500157293663971772706090895913460914745069391507821607407119079643228761455973951456502533178244458604653367072208247136844293637699200643287171063323543071264194456731844289514661786350889430308378000623859334853499710695649927546553930859489538568835127452768087260261620951571152218348568929719647604673202322083355880695310174743610457469825948560363963194178330338717661812773680168893080697111977194694723029058532904402104183070246873285332971231965064831098195313946537722964800874303153979101249774266944684978714490326471233669690510878880297645474564156158989457731952855288748034996749984050907787463093200641078724037937331601107193002062607142334582424540462542816352856677028430889581264765717876678209615246507786765087872876579003133134698338624886416752381893452723012001163113113034922197348228234562972085324530558808215284683475788390241823026060297736587629192442326257690596727099898138760798059017319872806116456671050828020313857962939085308641728493147347650389662707609350511398801922499039899386427952050922079528229736915415528950729894659100857580760402504515924176805312456595928815847212576854617355993371686752308486259055225379546441735683459211531704159539586262195682060312819955077548305878239777757471000557642922054213570564468304657936112737638081857238134537386315694972456099757128283052159658267650533880688019165391968118081281418572817220462275354095675911862857058211998333039295198503759091340411472036588937341537552271364297296808196599896469985420092587035276351185574613124473842321798493624035111419325317850897416455727774208238005295335892784239401954079585688942640101642480065408491600871030419967385671210921727088593422109492170881430916530371486986686971893179090200174110704118528398366526522301044888669286343645609490666154720754657171877519877813139000560447086571004937715998070976628393081479513366020160880383038706268705059769497694751767397008507404890547604186839928221021081130399669544722546602362870171695433294206230069208750619380871523396740933288856122974393873962887381758634584423578738264291004803756667693477749360819940001322660377896176798306587817917609943785269138158184041529402848733581418435970591379579640302235388232907281284199927893644729185255896812857249736740795602912638601051604084121854664026333259636443490047737400712524052142271307557177223718644380878139570493348240315980414040990842347102940869097156488101725379568353259267160845887570740559432298975447149848219162771649962305998564786314810119846095164450874514679765632251834857079057499439224964428029230689670767926868233893624811244604947042834617117937781325965227897322350201659300730107372479967565853987915222243858706826074362840581263173370500381210792807269616977634478284528864656653006242682724878778575478820403482309832337875262464806318641026961704528234584790327235788301279412929095117115574048470611073342621092132524224703194743294571228199637561311515852979620659565423507311318322911676832898668803357039688818470609589490061266012753972229635450284942904935805351259449321417370363952663330002226053999399493976847878006553505003002533676884193556909119395229541876962621299266331597772792862940937809403184874617127502263870006274003996395442342544914195287826641488147525494349583796260659420495576612103430544473916322575699055751049631519785776017501968635137055395586847394685476923560018187033465205842282662951905109025241855539482267976015496469063313573187025125372844144112789403485535788540116915885225539663969928808185475616304765301116517349885884405936331731432533799211895827560075034225205924165278014787237312897593027269541326581114529418241899001721402798568503278671018513545279607071002575123250839676257547507012180306883245517988455725639614671335400322017336633978725979742406809739074434849713367788775483348859367482214591151331249276586343256589118221419004652757799426605306095828358930206405554016138060678689066724033378193562867612701651633762322211931899503103752940992724735568995777465669508965004589174674841147523988346199165253245051342943517043177839997415531126829623625481724245532036772982202357745923377157001238230272487833972522323652446141230855886193819231870646619031765335717267735528420507029371753881025064279991852598942752816765278530756485593015469375198540642186735935640796252013159144435726671556867762786118448141819542800058844475657676470805275223210876130937076711621603388815334555907099900749277080522449657647447293299167735864452743062486723899043202975481149688526255530815693291541173946373125044792210818218274971922456732957266689999701700514112728316579750910292054024386449681639908403523846060297088448251094358934090524965062651966798913985381364764384862824498058997947342392021595105265330929741553926731104482099695044837836713826596572513348637631899862407598711389056234111194498836994171142578126e-16446", 0, 0, 3);  /* Rounds up because it's not in the middle. */

  printf("is_all_ok=%d bad_count=%u ok_count=%u\n", badc == 0, badc, goodc);
  return badc != 0;
}
